# Overall Dos9 suite Makefile, The Dos9 Project (c) Darkbatcher
# 2010-2013
#
# This is free software: you can redistribute it and/or modify it under the
# terms of the GNU General Public License as published by the Free Software 
# Foundation, either version 3 of the License, or (at your option) any later
# version.
#

DOS9_COMPONENTS=libDos9 libinteval libmatheval-dos9 dos9 tea dump po scripts

BUILD_TREE=bin${arch} bin${arch}/cmd bin${arch}/share bin${arch}/share \

all:
	$(MAKE) -e build-tree
	$(MAKE) -e bin
	$(MAKE) -e doc

# define a list of components to be build

bin:
	for i in $(DOS9_COMPONENTS); do $(MAKE) -e -C $$i ; done;

doc:
	cp -r man bin${arch}/share/man
	cd bin${arch} && dos9 // hlp /b ${lang} ${enc}
	
build-tree:
	for i in $(BUILD_TREE); do mkdir -p $$i ; done;

po-merge:
	$(MAKE) -e -C po po-merge
	
.PHONY: clean bin doc


clean:
	rm -r *.o